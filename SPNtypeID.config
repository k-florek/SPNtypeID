//#########################
//###Pipeline Parameters###
//#########################

/*
By default the pipeline looks for "_" in the read file name
and keeps everything before it as a sample id if you use "_"
in your sample names change the sample id separator to a
different value i.e. "-" or "".
*/

//Sample ID Separator
params.name_split_on = "_"

//Docker Content Trust
//1 = use only signed docker containers; 0 = use any containers
env.DOCKER_CONTENT_TRUST = 1

params.reads = ""
params.outdir = "SPNtypeID_results"

//Trimming parameters
params.minlength=10
params.trimdirection="lr"
params.qualitytrimscore=10
params.savetrimmedreads=false

//##################
//##Nextflow Tower##
//##################
//tower.accessToken = ''
//tower.enabled = true

//#######################
//###Pipeline Profiles###
//#######################

report.enabled = true
trace.enabled = true

//#####################
//####Docker Params####
//#####################

docker.enabled = true
docker.runOptions = "-u \$(id -u):\$(id -g)"

//####################
//#Singularity Params#
//####################
//singularity.enabled = true
//singularity.runOptions = ""
//process.stageInMode = "copy"

//####################
//##AWS Batch Params##
//####################
//process.executor = 'awsbatch'
//process.queue = ''
//aws.batch.cliPath = '/home/ec2-user/miniconda/bin/aws'
//aws.region = 'us-east-1'
//workDir = 's3://'

//#######################
//##Google Cloud Params##
//#######################
//process.executor = ''
//google.project = ''
//google.location = ''
//google.region = ''
//workDir = ''
//google.lifeSciences.bootDiskSize = 50.GB

//##################
//##Nextflow Tower##
//##################
//tower.accessToken = ''
//tower.enabled = true

//#######################
//###Docker Containers###
//#######################

kraken_container = 'docker.io/wslhbio/kraken:1.0.0-wslh-signed'
seroba_container = 'docker.io/wslhbio/seroba:1.0.2-wslh-signed'
bbtools_container = 'docker.io/wslhbio/bbtools:38.76-wslh-signed'
fastqc_container = 'docker.io/wslhbio/fastqc:0.11.8-wslh-signed'
shovill_container = 'docker.io/wslhbio/shovill:1.1.0-wslh-signed'
quast_container = 'docker.io/wslhbio/quast:5.0.2-wslh-signed'
samtools_container = 'docker.io/wslhbio/samtools:1.10-wslh-signed'
multiqc_container = 'docker.io/wslhbio/multiqc:1.11-wslh-signed'
pandas_container = 'docker.io/wslhbio/pandas:1.3.2-wslh-signed'
bioawk_container = 'docker.io/wslhbio/bioawk:1.0-wslh-signed'
linux_container = 'ubuntu:xenial'

process {
  cpus = 2
  memory = '4 GB'
  withName:preProcess{
    container = linux_container
  }
  withName:clean_reads{
    container = bbtools_container
  }
  withName:bbduk_summary{
    container = pandas_container
  }
  withName:fastqc{
    container = fastqc_container
  }
  withName:fastqc_summary{
    container = fastqc_container
  }
  withName:shovill{
    cpus = 8
    memory = '15 GB'
    container = shovill_container
  }
  withName:samtools{
    container = samtools_container
  }
  withName:coverage_stats{
    container = pandas_container
  }
  withName:quast{
    container = quast_container
  }
  withName:quast_summary{
    container = pandas_container
  }
  withName:bioawk{
    container = bioawk_container
  }
  withName:quality_stats{
    container = pandas_container
  }
  withName:kraken{
    container = kraken_container
  }
  withName:seroba{
    container = seroba_container
  }
  withName:typing_summary{
    container = pandas_container
  }
  withName:merge_results{
    container = pandas_container
  }
  withName:multiqc{
    container = multiqc_container
  }
}
